// Global default params
params {
    input = "samples.txt"
    outdir = "./results"
    publish_dir_mode = "copy"
    kmer_size = 25
    target_depth = 100
    assembler = "rnaspades"
}

// Process-specific resource configurations
process {
    executor = 'slurm'
    clusterOptions = '--account=your_account'  // Replace with your SLURM account
    queue = 'week-long-highmem'                // Adjust based on your cluster

    withName: FASTP {
        cpus = 4
        memory = '8 GB'
        time = '2h'
        container = 'quay.io/biocontainers/fastp:0.23.2--h79da9fb_0'
    }
    withName: REPAIR {
        cpus = 16
        memory = '32 GB'
        time = '4h'
        container = 'quay.io/biocontainers/bbtools:38.96--hdfd78af_0'
    }
    withName: MERGE_READS {
        cpus = 8
        memory = '32 GB'
        time = '6h'
        container = 'quay.io/biocontainers/pigz:2.8--hdfd78af_0'
    }
    withName: BBNORM {
        cpus = 64
        memory = '240 GB'
        time = '24h'
        container = 'quay.io/biocontainers/bbtools:38.96--hdfd78af_0'
    }
    withName: RNASPADES {
        cpus = 64
        memory = '250 GB'
        time = '168h'
        container = 'docker://staphb/rnaspades:3.15.5'
    }
    withName: TRINITY {
        cpus = 64
        memory = '250 GB'
        time = '168h'
        container = 'docker://trinityrnaseq/trinityrnaseq:2.15.2'
    }
    withName: BUSCO {
        cpus = 16
        memory = '32 GB'
        time = '24h'
        container = 'quay.io/biocontainers/busco:5.4.7--h4e1b8b8_0'
    }
}

// Container configurations
singularity {
    enabled = true
    autoMounts = true
    cacheDir = '/path/to/singularity_images'  // Adjust to your HPC path
}

// Profile configurations
profiles {
    standard {
        process.executor = 'local'
    }
    slurm {
        process.executor = 'slurm'
    }
}

// Manifest for pipeline information
manifest {
    name = 'nf-denovo-transcriptome'
    author = 'Your Name'
    description = 'De novo eukaryotic transcriptome assembly pipeline'
    version = '1.0.0'
    nextflowVersion = '>=21.10.0'
}

// Function to ensure reproducibility
timeline {
    enabled = true
    file = "${params.outdir}/pipeline_info/execution_timeline.html"
}
report {
    enabled = true
    file = "${params.outdir}/pipeline_info/execution_report.html"
} 